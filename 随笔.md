# LUA随笔

## 一、浅拷贝和深拷贝
| 拷贝方式\拷贝对象 | 只有值 | 表 |  
| ------ | ------ | ------ |
| 浅拷贝 | 两者相同，将原有对象复制一份，产生一个新对象。 | 拷贝出来的对象和拷贝前的实际上是同一个对象，占同一个内存。 |
| 深拷贝 | 两者相同，将原有对象复制一份，产生一个新对象。 | 创建出一个新的内存，一个新的对象。 |

### 深拷贝源码
```c++
function clone(object)
    local lookup_table = {}
    local function _copy(object)
        if type(object) ~= "table" then --object类型不为table
            return object 
        elseif lookup_table[object] then 
            return lookup_table[object]
        end
        local new_table = {}
        lookup_table[object] = new_table
        for key, value in pairs(object) do
            new_table[_copy(key)] = _copy(value)
        end
        return setmetatable(new_table, getmetatable(object))
    end
    return _copy(object) -- 返回clone出来的object表指针/地址
end
```
